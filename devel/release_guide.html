

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Doing a matplolib release &mdash; Matplotlib 1.2.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/mpl.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Matplotlib 1.2.0 documentation"
          href="../_static/opensearch.xml"/>
    <link rel="top" title="Matplotlib 1.2.0 documentation" href="../index.html" />
    <link rel="up" title="The Matplotlib Developers’ Guide" href="index.html" />
    <link rel="next" title="Working with transformations" href="transformations.html" />
    <link rel="prev" title="Documenting matplotlib" href="documenting_mpl.html" /> 
  </head>
  <body>
<!-- Piwik -->
<script type="text/javascript">
if ("matplotlib.sourceforge.net" == document.location.hostname ||
    "matplotlib.sf.net" == document.location.hostname) {
  var pkBaseURL = (("https:" == document.location.protocol) ? "https://apps.sourceforge.net/piwik/matplotlib/" : "http://apps.sourceforge.net/piwik/matplotlib/");
  document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
}
</script>
<script type="text/javascript">
if ("matplotlib.sourceforge.net" == document.location.hostname ||
    "matplotlib.sf.net" == document.location.hostname) {
  piwik_action_name = '';
  piwik_idsite = 1;
  piwik_url = pkBaseURL + "piwik.php";
  piwik_log(piwik_action_name, piwik_idsite, piwik_url);
  document.write(unescape('%3Cobject%3E%3Cnoscript%3E%3Cp%3E%3Cimg src="http://apps.sourceforge.net/piwik/matplotlib/piwik.php?idsite=1" alt="piwik"/%3E%3C/p%3E%3C/noscript%3E%3C/object%3E'));
}
</script>
<!-- End Piwik Tag -->
<link rel="shortcut icon" href="_static/favicon.ico">

<!-- The "Fork me on github" ribbon -->
<img style="float: right; margin-bottom: -40px; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" usemap="#ribbonmap"/>
<map name="ribbonmap">
    <area shape="poly" coords="15,0,148,-1,148,135" href="https://github.com/matplotlib/matplotlib" title="Fork me on GitHub" />
</map>

<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
<a href="../index.html"><img src="../_static/logo2.png" border="0" alt="matplotlib"/></a>
</div>


    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="transformations.html" title="Working with transformations"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="documenting_mpl.html" title="Documenting matplotlib"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">home</a>|&nbsp;</li>
        <li><a href="../search.html">search</a>|&nbsp;</li>
        <li><a href="../examples/index.html">examples</a>|&nbsp;</li>
        <li><a href="../gallery.html">gallery</a>|&nbsp;</li>
        <li><a href="../citing.html">citation</a>|&nbsp;</li>
        <li><a href="../contents.html">docs</a> &raquo;</li>

          <li><a href="index.html" accesskey="U">The Matplotlib Developers&#8217; Guide</a> &raquo;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Doing a matplolib release</a><ul>
<li><a class="reference internal" href="#testing">Testing</a></li>
<li><a class="reference internal" href="#branching">Branching</a></li>
<li><a class="reference internal" href="#packaging">Packaging</a></li>
<li><a class="reference internal" href="#release-candidate-testing">Release candidate testing</a></li>
<li><a class="reference internal" href="#documentation-updates">Documentation updates</a></li>
<li><a class="reference internal" href="#announcing">Announcing</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="documenting_mpl.html"
                        title="previous chapter">Documenting matplotlib</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="transformations.html"
                        title="next chapter">Working with transformations</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/devel/release_guide.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="doing-a-matplolib-release">
<span id="release-guide"></span><h1>Doing a matplolib release<a class="headerlink" href="#doing-a-matplolib-release" title="Permalink to this headline">¶</a></h1>
<p>A guide for developers who are doing a matplotlib release</p>
<ul class="simple">
<li>Edit <tt class="file docutils literal"><span class="pre">__init__.py</span></tt> and bump the version number</li>
</ul>
<div class="section" id="testing">
<span id="release-testing"></span><h2>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Run all of the regression tests by running the <tt class="xref py py-obj docutils literal"><span class="pre">tests.py</span></tt> script at
the root of the source tree.</li>
<li>Run <tt class="file docutils literal"><span class="pre">unit/memleak_hawaii3.py</span></tt> and make sure there are no
memory leaks</li>
<li>try some GUI examples, eg <tt class="file docutils literal"><span class="pre">simple_plot.py</span></tt> with GTKAgg, TkAgg, etc...</li>
<li>remove font cache and tex cache from <tt class="file docutils literal"><span class="pre">.matplotlib</span></tt> and test
with and without cache on some example script</li>
<li>Optionally, make sure <tt class="file docutils literal"><span class="pre">examples/tests/backend_driver.py</span></tt> runs
without errors and check the output of the PNG, PDF, PS and SVG
backends</li>
</ul>
</div>
<div class="section" id="branching">
<span id="release-branching"></span><h2>Branching<a class="headerlink" href="#branching" title="Permalink to this headline">¶</a></h2>
<p>Once all the tests are passing and you are ready to do a release, you
need to create a release branch:</p>
<div class="highlight-python"><pre>git checkout -b v1.1.x
git push git@github.com:matplotlib/matplotlib.git v1.1.x</pre>
</div>
<p>On the branch, do any additional testing you want to do, and then build
binaries and source distributions for testing as release candidates.</p>
<p>For each release candidate as well as for the final release version,
please <tt class="xref py py-obj docutils literal"><span class="pre">git</span> <span class="pre">tag</span></tt> the commit you will use for packaging like so:</p>
<div class="highlight-python"><pre>git tag -a v1.1.0rc1</pre>
</div>
<p>The <tt class="xref py py-obj docutils literal"><span class="pre">-a</span></tt> flag will allow you to write a message about the tag, and
affiliate your name with it. A reasonable tag message would be something
like <tt class="docutils literal"><span class="pre">v1.1.0</span> <span class="pre">Release</span> <span class="pre">Candidate</span> <span class="pre">1</span> <span class="pre">(September</span> <span class="pre">24,</span> <span class="pre">2011)</span></tt>. To tag a
release after the fact, just track down the commit hash, and:</p>
<div class="highlight-python"><pre>git tag -a v1.0.1 a9f3f3a50745</pre>
</div>
<p>Tags allow developers to quickly checkout different releases by name,
and also provides source download via zip and tarball on github.</p>
<p>Then push the tags to the main repository:</p>
<div class="highlight-python"><pre>git push upstream v1.0.1</pre>
</div>
</div>
<div class="section" id="packaging">
<span id="release-packaging"></span><h2>Packaging<a class="headerlink" href="#packaging" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Make sure the <tt class="file docutils literal"><span class="pre">MANIFEST.in</span></tt> is up to date and remove
<tt class="file docutils literal"><span class="pre">MANIFEST</span></tt> so it will be rebuilt by MANIFEST.in</li>
<li>run <tt class="xref py py-obj docutils literal"><span class="pre">git</span> <span class="pre">clean</span></tt> in the mpl git directory before building the sdist</li>
<li>unpack the sdist and make sure you can build from that directory</li>
<li>Use <tt class="file docutils literal"><span class="pre">setup.cfg</span></tt> to set the default backends.  For windows and
OSX, the default backend should be TkAgg.  You should also turn on
or off any platform specific build options you need.  Importantly,
you also need to make sure that you delete the <tt class="file docutils literal"><span class="pre">build</span></tt> dir
after any changes to <tt class="file docutils literal"><span class="pre">setup.cfg</span></tt> before rebuilding since cruft
in the <tt class="file docutils literal"><span class="pre">build</span></tt> dir can get carried along.</li>
<li>on windows, unix2dos the rc file</li>
<li>We have a Makefile for the OS X builds in the mpl source dir
<tt class="file docutils literal"><span class="pre">release/osx</span></tt>, so use this to prepare the OS X releases.</li>
<li>We have a Makefile for the win32 mingw builds in the mpl source dir
<tt class="file docutils literal"><span class="pre">release/win32</span></tt> which you can use this to prepare the windows
releases.</li>
</ul>
</div>
<div class="section" id="release-candidate-testing">
<span id="id1"></span><h2>Release candidate testing<a class="headerlink" href="#release-candidate-testing" title="Permalink to this headline">¶</a></h2>
<p>Post the release candidates tarballs to the <a class="reference external" href="https://github.com/matplotlib/matplotlib/downloads">matplotlib download page</a>.  If you have
developer rights, you should see an &#8220;Upload a new file&#8221; section
there.</p>
</div>
<div class="section" id="documentation-updates">
<span id="release-announcing"></span><h2>Documentation updates<a class="headerlink" href="#documentation-updates" title="Permalink to this headline">¶</a></h2>
<p>The built documentation exists in the <a class="reference external" href="https://github.com/matplotlib/matplotlib.github.com/">matplotlib.github.com</a> repository.
Pushing changes to master automatically updates the website.</p>
<p>In the matplotlib source repository, build the documentation:</p>
<div class="highlight-python"><pre>cd doc
python make.py html
python make.py latex</pre>
</div>
<p>Then copy the build products into your local checkout of the
<tt class="xref py py-obj docutils literal"><span class="pre">matplotlib.github.com</span></tt> repository (assuming here to be checked out in
<tt class="xref py py-obj docutils literal"><span class="pre">com</span></tt>:</p>
<div class="highlight-python"><pre>cp -r build/html/* ~/matplotlib.github.com
cp build/latex/Matplotlib.pdf ~/matplotlib.github.com</pre>
</div>
<p>Then, from the <tt class="xref py py-obj docutils literal"><span class="pre">matplotlib.github.com</span></tt> directory, commit and push the
changes upstream:</p>
<div class="highlight-python"><pre>git commit -m "Updating for v1.0.1"
git push upstream master</pre>
</div>
</div>
<div class="section" id="announcing">
<h2>Announcing<a class="headerlink" href="#announcing" title="Permalink to this headline">¶</a></h2>
<p>Announce the release on matplotlib-announce, matplotlib-users and
matplotlib-devel.  Include a summary of highlights from the CHANGELOG
and/or post the whole CHANGELOG since the last release.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="transformations.html" title="Working with transformations"
             >next</a> |</li>
        <li class="right" >
          <a href="documenting_mpl.html" title="Documenting matplotlib"
             >previous</a> |</li>
        <li><a href="../index.html">home</a>|&nbsp;</li>
        <li><a href="../search.html">search</a>|&nbsp;</li>
        <li><a href="../examples/index.html">examples</a>|&nbsp;</li>
        <li><a href="../gallery.html">gallery</a>|&nbsp;</li>
        <li><a href="../citing.html">citation</a>|&nbsp;</li>
        <li><a href="../contents.html">docs</a> &raquo;</li>

          <li><a href="index.html" >The Matplotlib Developers&#8217; Guide</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012 John Hunter, Darren Dale, Eric Firing, Michael Droettboom and the matplotlib development team.
      Last updated on Dec 13, 2012.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>